{% extends "main/layout.html" %}


{% block breadcrump %}
<!-- Arrow -->
<span class="mx-5 text-orange-400 rotate-180">
    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
    </svg>
</span>

<a href="{% url 'main:employees' group.id %}" class="flex items-center text-orange-400 hover:bg-orange-400 hover:text-white rounded p-2 transition-all font-bold">
    <svg class="w-6 h-6 mx-2" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
        <path d="M144 0a80 80 0 1 1 0 160A80 80 0 1 1 144 0zM512 0a80 80 0 1 1 0 160A80 80 0 1 1 512 0zM0 298.7C0 239.8 47.8 192 106.7 192h42.7c15.9 0 31 3.5 44.6 9.7c-1.3 7.2-1.9 14.7-1.9 22.3c0 38.2 16.8 72.5 43.3 96c-.2 0-.4 0-.7 0H21.3C9.6 320 0 310.4 0 298.7zM405.3 320c-.2 0-.4 0-.7 0c26.6-23.5 43.3-57.8 43.3-96c0-7.6-.7-15-1.9-22.3c13.6-6.3 28.7-9.7 44.6-9.7h42.7C592.2 192 640 239.8 640 298.7c0 11.8-9.6 21.3-21.3 21.3H405.3zM224 224a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zM128 485.3C128 411.7 187.7 352 261.3 352H378.7C452.3 352 512 411.7 512 485.3c0 14.7-11.9 26.7-26.7 26.7H154.7c-14.7 0-26.7-11.9-26.7-26.7z"></path>
    </svg>

    <span class="mx-2">{{ group.title }}</span>
</a>

<!-- Arrow -->
<span class="mx-5 text-orange-400 rotate-180">
    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
    </svg>
</span>

<a href="" class="flex items-center text-orange-400 hover:bg-orange-400 hover:text-white rounded p-2 transition-all font-bold">
    <svg class="w-6 h-6 mx-2" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
        <path d="M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm2 96a72 72 0 11-72 72 72 72 0 0172-72zm-2 288a175.55 175.55 0 01-129.18-56.6C135.66 329.62 215.06 320 256 320s120.34 9.62 129.18 55.39A175.52 175.52 0 01256 432z"></path>
    </svg>

    <span class="mx-2">{{ employee.name }}</span>
</a>
{% endblock %}




{% block body %}
<div class="mx-auto" x-data="{ modalOpen: false }">
    <div class="py-8">
        <div>
            <h2 class="text-2xl mb-4 font-semibold leading-tight">{{ employee.name }}</h2>
        </div>


        <div class="my-2 justify-between flex sm:flex-row flex-col">
            <div class="flex flex-row mb-1 sm:mb-0">
                <!-- Years dropdown -->
                <div
                    x-data="{ dropdownOpen: false}"
                    @click.outside="dropdownOpen = false"
                    class="relative inline-block text-right"
                >
                    <button
                        @click="dropdownOpen = !dropdownOpen"
                        class="bg-orange-400 flex items-center rounded py-3 px-5 font-semibold text-white"
                    >
                        {{ current_year.title }}
                    <span class="pr-2">
                        <svg width="12" height="7" viewBox="0 0 12 7" class="fill-current">
                        <path
                            d="M0.564864 0.879232C0.564864 0.808624 0.600168 0.720364 0.653125 0.667408C0.776689 0.543843 0.970861 0.543844 1.09443 0.649756L5.82517 5.09807C5.91343 5.18633 6.07229 5.18633 6.17821 5.09807L10.9089 0.649756C11.0325 0.526192 11.2267 0.543844 11.3502 0.667408C11.4738 0.790972 11.4562 0.985145 11.3326 1.10871L6.60185 5.55702C6.26647 5.85711 5.73691 5.85711 5.41917 5.55702L0.670776 1.10871C0.600168 1.0381 0.564864 0.967492 0.564864 0.879232Z"
                        />
                        <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M1.4719 0.229332L6.00169 4.48868L10.5171 0.24288C10.9015 -0.133119 11.4504 -0.0312785 11.7497 0.267983C12.1344 0.652758 12.0332 1.2069 11.732 1.50812L11.7197 1.52041L6.97862 5.9781C6.43509 6.46442 5.57339 6.47872 5.03222 5.96853C5.03192 5.96825 5.03252 5.96881 5.03222 5.96853L0.271144 1.50833C0.123314 1.3605 -5.04223e-08 1.15353 -3.84322e-08 0.879226C-2.88721e-08 0.660517 0.0936127 0.428074 0.253705 0.267982C0.593641 -0.0719548 1.12269 -0.0699964 1.46204 0.220873L1.4719 0.229332ZM5.41917 5.55702C5.73691 5.85711 6.26647 5.85711 6.60185 5.55702L11.3326 1.10871C11.4562 0.985145 11.4738 0.790972 11.3502 0.667408C11.2267 0.543844 11.0325 0.526192 10.9089 0.649756L6.17821 5.09807C6.07229 5.18633 5.91343 5.18633 5.82517 5.09807L1.09443 0.649756C0.970861 0.543844 0.776689 0.543843 0.653125 0.667408C0.600168 0.720364 0.564864 0.808624 0.564864 0.879232C0.564864 0.967492 0.600168 1.0381 0.670776 1.10871L5.41917 5.55702Z"
                        />
                        </svg>
                    </span>
                    </button>
                    <div
                        x-show="dropdownOpen"
                        x-transition:enter-start="opacity-0"
                        x-transition:enter-end="opacity-100"
                        x-transition:leave-start="opacity-100"
                        x-transition:leave-end="opacity-0"
                        :class="dropdownOpen ? 'top-full' : 'top-[110%]' "
                        class="absolute min-w-max right-0 z-10 mt-2 w-full rounded border bg-white transition-all"
                    >
                        {% for year in employee.years.all %}
                            {% if year.id != current_year.id %}
                                {% if year.months %}
                                <a
                                    href="{% url 'main:profile' employee.group.id employee.id year.id year.months.first.id %}"
                                    class="hover:bg-orange-400 hover:text-orange-400 block py-2 px-5 font-semibold hover:bg-opacity-5"
                                >
                                    {{ year.title }}
                                </a>
                                {% else %}
                                <span
                                    @click="modalOpen = true"
                                    onclick="addMonthBefore()"
                                    class="hover:bg-orange-400 cursor-pointer hover:text-orange-400 block py-2 px-5 font-semibold hover:bg-opacity-5"
                                >
                                    {{ year.title }}
                                </span>
                                {% endif %}
                            {% else %}
                            <span class="block py-2 cursor-default bg-orange-400 bg-opacity-5 text-orange-400 px-5 font-semibold">
                                {{ year.title }}
                            </span>
                            {% endif %}
                        {% endfor %}
                        <span
                            class="py-2 cursor-pointer text-black hover:text-gray-600 flex items-center gap-x-2 justify-center"
                            @click="modalOpen = true"
                            onclick="addYear()"
                        >
                            <button class="py-2 rounded-md text-sm font-semibold hover:bg-opacity-75">
                                إضافة
                            </button>
                            <svg  class="fill-current font-bold" width="17" height="17" viewBox="0 0 24 24" focusable="false"><path d="M20 13h-7v7h-2v-7H4v-2h7V4h2v7h7v2z"></path></svg>
                        </span>
                    </div>
                </div>

                <!-- Months dropdown -->
                <div
                    x-data="{ dropdownOpen: false}"
                    @click.outside="dropdownOpen = false"
                    class="relative inline-block mx-3 text-right"
                >
                    <button
                        @click="dropdownOpen = !dropdownOpen"
                        class="bg-orange-400 flex items-center rounded py-3 px-5 font-semibold text-white"
                    >
                        {{ current_month.title }}
                    <span class="pr-2">
                        <svg width="12" height="7" viewBox="0 0 12 7" class="fill-current">
                        <path
                            d="M0.564864 0.879232C0.564864 0.808624 0.600168 0.720364 0.653125 0.667408C0.776689 0.543843 0.970861 0.543844 1.09443 0.649756L5.82517 5.09807C5.91343 5.18633 6.07229 5.18633 6.17821 5.09807L10.9089 0.649756C11.0325 0.526192 11.2267 0.543844 11.3502 0.667408C11.4738 0.790972 11.4562 0.985145 11.3326 1.10871L6.60185 5.55702C6.26647 5.85711 5.73691 5.85711 5.41917 5.55702L0.670776 1.10871C0.600168 1.0381 0.564864 0.967492 0.564864 0.879232Z"
                        />
                        <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M1.4719 0.229332L6.00169 4.48868L10.5171 0.24288C10.9015 -0.133119 11.4504 -0.0312785 11.7497 0.267983C12.1344 0.652758 12.0332 1.2069 11.732 1.50812L11.7197 1.52041L6.97862 5.9781C6.43509 6.46442 5.57339 6.47872 5.03222 5.96853C5.03192 5.96825 5.03252 5.96881 5.03222 5.96853L0.271144 1.50833C0.123314 1.3605 -5.04223e-08 1.15353 -3.84322e-08 0.879226C-2.88721e-08 0.660517 0.0936127 0.428074 0.253705 0.267982C0.593641 -0.0719548 1.12269 -0.0699964 1.46204 0.220873L1.4719 0.229332ZM5.41917 5.55702C5.73691 5.85711 6.26647 5.85711 6.60185 5.55702L11.3326 1.10871C11.4562 0.985145 11.4738 0.790972 11.3502 0.667408C11.2267 0.543844 11.0325 0.526192 10.9089 0.649756L6.17821 5.09807C6.07229 5.18633 5.91343 5.18633 5.82517 5.09807L1.09443 0.649756C0.970861 0.543844 0.776689 0.543843 0.653125 0.667408C0.600168 0.720364 0.564864 0.808624 0.564864 0.879232C0.564864 0.967492 0.600168 1.0381 0.670776 1.10871L5.41917 5.55702Z"
                        />
                        </svg>
                    </span>
                    </button>
                    <div
                        x-show="dropdownOpen"
                        x-transition:enter-start="opacity-0"
                        x-transition:enter-end="opacity-100"
                        x-transition:leave-start="opacity-100"
                        x-transition:leave-end="opacity-0"
                        :class="dropdownOpen ? 'top-full' : 'top-[110%]' "
                        class="absolute right-0 min-w-max z-10 mt-2 w-full rounded border bg-white transition-all"
                    >
                        {% for month in current_year.months.all %}
                            {% if month.id != current_month.id %}
                            <a
                                href="{% url 'main:profile' employee.group.id employee.id current_year.id month.id %}"
                                class="hover:bg-orange-400 hover:text-orange-400 block py-2 px-5 font-semibold hover:bg-opacity-5"
                            >
                                {{ month.title }}
                            </a>
                            {% else %}
                            <span class="block py-2 cursor-default bg-orange-400 bg-opacity-5 text-orange-400 px-5 font-semibold">
                                {{ month.title }}
                            </span>
                            {% endif %}
                        {% endfor %}
                        <span
                            class="py-2 text-black cursor-pointer hover:text-gray-600 flex items-center gap-x-2 justify-center"
                            @click="modalOpen = true"
                            onclick="addMonth()"
                        >
                            <button class="py-2 rounded-md text-sm font-semibold hover:bg-opacity-75">
                                إضافة
                            </button>
                            <svg  class="fill-current font-bold" width="17" height="17" viewBox="0 0 24 24" focusable="false"><path d="M20 13h-7v7h-2v-7H4v-2h7V4h2v7h7v2z"></path></svg>
                        </span>
                    </div>
                </div>                  
            </div>

            <button
                @click="modalOpen = true"
                class="bg-orange-400 flex items-center rounded py-3 px-5 font-semibold text-white hover:bg-opacity-75 transition-all"
                onclick="addDay()"
            >
                إضافة يوم
                <span class="pr-2">
                    <svg  class="fill-current font-bold" width="20" height="20" viewBox="0 0 24 24" focusable="false"><path d="M20 13h-7v7h-2v-7H4v-2h7V4h2v7h7v2z"></path></svg>
                </span>
            </button>
        </div>



        <!-- Days table -->
        <div class="-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-x-auto">
            <div class="inline-block min-w-full shadow rounded-lg overflow-hidden">
                <table class="min-w-full leading-normal">
                    <thead>
                        <tr>
                            <th
                                class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-right text-xs font-semibold text-gray-600">
                                اليوم
                            </th>
                            <th
                                class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-right text-xs font-semibold text-gray-600">
                                وقت الحضور
                            </th>
                            <th
                                class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-right text-xs font-semibold text-gray-600">
                                وقت الانصراف
                            </th>
                            <th
                                class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-right text-xs font-semibold text-gray-600">
                                الوقت الكلي
                            </th>
                            <th
                                class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-right text-xs font-semibold text-gray-600">
                                مقدار الزيادة 
                            </th>
                            <th
                                class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-right text-xs font-semibold text-gray-600">
                                مقدار النقيصة
                            </th>
                            <th
                                class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-right text-xs font-semibold text-gray-600">
                                الملاحظات
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for day in employee_days %}
                        <tr>
                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                <p class="text-gray-900 whitespace-no-wrap">
                                    {% if day.title %}
                                        {{ day.title }}
                                    {% else %}
                                        بدون عنوان
                                    {% endif %}
                                </p>
                                {{ day.date_day }}/{{ day.date_month }}/{{ current_year.title }}
                            </td>
                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                <p class="text-gray-900 whitespace-no-wrap">
                                    الساعة 
                                    <span class="font-bold">{{ day.attend_hour }}</span>
                                     و 
                                    <span class="font-bold">{{ day.attend_minute }}</span>
                                    دقيقة
                                </p>
                            </td>
                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                <p class="text-gray-900 whitespace-no-wrap">
                                    الساعة 
                                    <span class="font-bold">{{ day.leave_hour }}</span>
                                     و 
                                    <span class="font-bold">{{ day.leave_minute }}</span>
                                    دقيقة
                                </p>
                            </td>
                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                <p class="text-gray-900 whitespace-no-wrap"> 
                                    <span class="font-bold">{{ day.total_hours }}</span>
                                    ساعة و 
                                    <span class="font-bold">{{ day.total_minutes }}</span>
                                    دقيقة
                                </p>
                            </td>
                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                <span class="relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight">
                                    <span class="absolute inset-0 bg-green-200 opacity-50 rounded-full"></span>
                                    <span class="relative">
                                        <p class="text-gray-900 whitespace-no-wrap"> 
                                            <span class="font-bold">{{ day.more_hours }}</span>
                                            ساعة و 
                                            <span class="font-bold">{{ day.more_minutes }}</span>
                                            دقيقة
                                        </p>
                                    </span>
                                </span>
                            </td>
                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                <span class="relative inline-block px-3 py-1 font-semibold text-red-900 leading-tight">
                                    <span class="absolute inset-0 bg-red-200 opacity-50 rounded-full"></span>
                                    <span class="relative">
                                        <p class="text-gray-900 whitespace-no-wrap"> 
                                            <span class="font-bold">{{ day.less_hours }}</span>
                                            ساعة و 
                                            <span class="font-bold">{{ day.less_minutes }}</span>
                                            دقيقة
                                        </p>
                                    </span>
                                </span>
                            </td>
                            <td class="px-5 py-5 border-b border-gray-200">
                                {% if day.note %}
                                <button 
                                    class="bg-orange-400 py-1 text-white px-3 rounded-full text-sm font-semibold hover:bg-opacity-75"
                                    @click="modalOpen = true"
                                    onclick="showNote('{{ day.note }}')"
                                >
                                    عرض الملاحظات
                                </button>
                                {% endif %}
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                <p class="text-gray-900 whitespace-no-wrap">
                                    لا توجد بيانات.
                                </p>
                            </td>
                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                
                            </td>
                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                
                            </td>
                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                
                            </td>
                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                
                            </td>
                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                
                            </td>
                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                                
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <div class="flex items-center justify-start gap-10">
            <!-- Month results table -->
            <div class="mx-auto flex justify-center sm:-mx-8 px-4 sm:px-8 py-4 overflow-x-auto">
                <div class="inline-block shadow rounded-lg overflow-hidden">
                    <table class="min-w-full leading-normal">
                        <thead>
                            <tr>
                                <th
                                    class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-lg font-semibold text-gray-600">
                                    المجموع الشهري - {{ current_month.title }}
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="px-5 py-5 gap-x-3 flex items-center border-b border-gray-200 bg-white text-sm">
                                    <p class="font-semibold">الزيادة بالوقت: </p>
                                    <span class="relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight">
                                        <span class="absolute inset-0 bg-green-200 opacity-50 rounded-full"></span>
                                        <span class="relative">
                                            <p class="text-gray-900 whitespace-no-wrap"> 
                                                <span class="font-bold">{{ current_month.more_hours }}</span>
                                                ساعة و 
                                                <span class="font-bold">{{ current_month.more_minutes }}</span>
                                                دقيقة
                                            </p>
                                        </span>
                                    </span>
                                    
                                </td>
                            </tr>
                            
                            <tr>
                                <td class="px-5 flex items-center gap-x-3 py-5 border-b border-gray-200 bg-white text-sm">
                                    <p class="font-semibold">النقيصة بالوقت: </p>
                                    <span class="relative inline-block px-3 py-1 font-semibold text-red-900 leading-tight">
                                        <span class="absolute inset-0 bg-red-200 opacity-50 rounded-full"></span>
                                        <span class="relative">
                                            <p class="text-gray-900 whitespace-no-wrap"> 
                                                <span class="font-bold">{{ current_month.less_hours }}</span>
                                                ساعة و 
                                                <span class="font-bold">{{ current_month.less_minutes }}</span>
                                                دقيقة
                                            </p>
                                        </span>
                                    </span>
                                </td>
                            </tr>
    
                        </tbody>
                    </table>
                </div>
            </div>
    
    
            <!-- Year results table -->
            <div class="mx-auto flex justify-center sm:-mx-8 px-4 sm:px-8 py-4 overflow-x-auto">
                <div class="inline-block shadow rounded-lg overflow-hidden">
                    <table class="min-w-full leading-normal">
                        <thead>
                            <tr>
                                <th
                                    class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-lg font-semibold text-gray-600">
                                    المجموع السنوي - {{ current_year.title }}
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="px-5 py-5 gap-x-3 flex items-center border-b border-gray-200 bg-white text-sm">
                                    <p class="font-semibold">الزيادة بالوقت: </p>
                                    <span class="relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight">
                                        <span class="absolute inset-0 bg-green-200 opacity-50 rounded-full"></span>
                                        <span class="relative">
                                            <p class="text-gray-900 whitespace-no-wrap"> 
                                                <span class="font-bold">{{ current_year.more_hours }}</span>
                                                ساعة و 
                                                <span class="font-bold">{{ current_year.more_minutes }}</span>
                                                دقيقة
                                            </p>
                                        </span>
                                    </span>
                                    
                                </td>
                            </tr>
                            
                            <tr>
                                <td class="px-5 flex items-center gap-x-3 py-5 border-b border-gray-200 bg-white text-sm">
                                    <p class="font-semibold">النقيصة بالوقت: </p>
                                    <span class="relative inline-block px-3 py-1 font-semibold text-red-900 leading-tight">
                                        <span class="absolute inset-0 bg-red-200 opacity-50 rounded-full"></span>
                                        <span class="relative">
                                            <p class="text-gray-900 whitespace-no-wrap"> 
                                                <span class="font-bold">{{ current_year.less_hours }}</span>
                                                ساعة و 
                                                <span class="font-bold">{{ current_year.less_minutes }}</span>
                                                دقيقة
                                            </p>
                                        </span>
                                    </span>
                                </td>
                            </tr>
    
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    {% include "main/components/Modal.html" %}
</div>

<script>
    const modal = document.getElementById("modal")
    const date = new Date()

    function addYear(){
            modal.innerHTML = 
            `<h3 class="pb-2 mb-3 text-xl font-bold text-dark sm:text-2xl">
                إضافة سنة
            </h3>

            <form action={% url 'main:addYear' group.id %} method="POST">
                {% csrf_token %}
                <input
                    class="w-full max-w-xl px-4 py-2 border rounded-md focus:outline-none focus:ring" 
                    type="text" 
                    placeholder="عنوان السنة، 2023 مثلاً" 
                    required=""
                    x-ref="input"
                    name="title"
                >
                <input class="hidden" name="employee" value="{{ employee.id }}" hidden>
                <input class="hidden" name="more_hours" value="0" hidden>
                <input class="hidden" name="more_minutes" value="0" hidden>
                <input class="hidden" name="less_hours" value="0" hidden>
                <input class="hidden" name="less_minutes" value="0" hidden>

                <div class="flex flex-wrap justify-center mt-5 -mx-3">
                    <div class="w-1/6 px-3">
                        <button
                            @click="modalOpen = false"
                            class="block w-full p-3 text-base font-bold text-center text-white transition bg-red-600 border rounded-lg"
                        >
                            إلغاء
                        </button>
                    </div>
                    <div class="w-1/6 px-3">
                        <button
                            type="submit"
                            class="block w-full p-3 text-base font-bold text-center transition border rounded-lg hover:bg-opacity-90"
                        >
                            تم
                        </button>
                    </div>
                </div>
            </form>`
    }

    function addMonth(){
        modal.innerHTML = 
        `<h3 class="pb-2 mb-3 text-xl font-bold text-dark sm:text-2xl">
            إضافة شهر إلى {{ current_year.title }}
        </h3>
    
        <form action={% url 'main:addMonth' group.id employee.id current_year.id current_month.id  %} method="POST">
            {% csrf_token %}
            <input
                class="w-full max-w-xl px-4 py-2 border rounded-md focus:outline-none focus:ring" 
                type="text" 
                placeholder="عنوان الشهر، الشهر العاشر مثلاً" 
                required=""
                x-ref="input"
                name="title"
            >
            <input class="hidden" name="employee" value="{{ employee.id }}" hidden>
            <input class="hidden" name="year" value="{{ current_year.id }}" hidden>
            <input class="hidden" name="more_hours" value="0" hidden>
            <input class="hidden" name="more_minutes" value="0" hidden>
            <input class="hidden" name="less_hours" value="0" hidden>
            <input class="hidden" name="less_minutes" value="0" hidden>

            <div class="flex flex-wrap justify-center mt-5 -mx-3">
                <div class="w-1/6 px-3">
                    <button
                        @click="modalOpen = false"
                        class="block w-full p-3 text-base font-bold text-center text-white transition bg-red-600 border rounded-lg"
                    >
                        إلغاء
                    </button>
                </div>
                <div class="w-1/6 px-3">
                    <button
                        type="submit"
                        class="block w-full p-3 text-base font-bold text-center transition border rounded-lg hover:bg-opacity-90"
                    >
                        تم
                    </button>
                </div>
            </div>
        </form>`
    }

    function addDay(){
            modal.innerHTML = 
            `<h3 class="pb-2 mb-3 text-xl font-bold text-dark sm:text-2xl">
                إضافة يوم إلى {{ current_month.title }}
            </h3>

            <form class="flex flex-col gap-y-3" action={% url 'main:addDay' group.id employee.id current_year.id current_month.id %} method="POST">
                {% csrf_token %}
                <input
                    class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring" 
                    type="text" 
                    placeholder="عنوان اليوم، الثلاثاء مثلاً" 
                    required=""
                    x-ref="input"
                    name="title"
                >

                <div class="flex flex-col items-right justify-center gap-3">
                    <p class="font-semibold">الحضور:</p>
                    <div class="flex justify-center items-center gap-x-3">
                        <input
                            class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring" 
                            placeholder="الساعة" 
                            required=""
                            name="attend_hour"
                        >
                        <input
                            class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring" 
                            placeholder="الدقيقة" 
                            required=""
                            name="attend_minute"
                        >
                    </div>
                    
                </div>

                <div class="flex flex-col items-right justify-center gap-3">
                    <p class="font-semibold">الانصراف:</p>
                    <div class="flex justify-center items-center gap-x-3">
                        <input
                            class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring" 
                            placeholder="الساعة" 
                            required=""
                            name="leave_hour"
                        >
                        <input
                            class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring" 
                            placeholder="الدقيقة" 
                            required=""
                            name="leave_minute"
                        >
                    </div>
                </div>

                <div class="flex flex-col items-right justify-center gap-3">
                    <p class="font-semibold">التاريخ:</p>
                    <div class="flex justify-center items-center gap-x-3">
                        <input
                            class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring" 
                            type="text" 
                            placeholder="اليوم" 
                            required=""
                            name="date_day"
                            value="{% now "d" %}"
                        >
                        <input
                            class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring" 
                            type="text" 
                            placeholder="الشهر" 
                            required=""
                            name="date_month"
                            value="{% now "n" %}"
                        >
                    </div>
                </div>
                
                <textarea class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring mt-3 resize-none" name="note" value="" placeholder="كتابة الملاحظات" rows="4"></textarea>


                <input class="hidden" name="employee" value="{{ employee.id }}" hidden>
                <input class="hidden" name="month" value="{{ current_month.id }}" hidden>
                <input class="hidden" name="year" value="{{ current_year.id }}" hidden>
                <input class="hidden" name="required_hours" value="{{ group.required_hours }}" hidden>
                <input class="hidden" name="required_minutes" value="{{ group.required_minutes }}" hidden>
                <input class="hidden" name="more_hours" value="0" hidden>
                <input class="hidden" name="more_minutes" value="0" hidden>
                <input class="hidden" name="less_hours" value="0" hidden>
                <input class="hidden" name="less_minutes" value="0" hidden>
                <input class="hidden" name="total_hours" value="0" hidden>
                <input class="hidden" name="total_minutes" value="0" hidden>


                <div class="flex flex-wrap justify-center mt-3 -mx-3">
                    <div class="w-1/6 px-3">
                        <button
                            @click="modalOpen = false"
                            class="block w-full p-3 text-base font-bold text-center text-white transition bg-red-600 border rounded-lg"
                        >
                            إلغاء
                        </button>
                    </div>
                    <div class="w-1/6 px-3">
                        <button
                            type="submit"
                            class="block w-full p-3 text-base font-bold text-center transition border rounded-lg hover:bg-opacity-90"
                        >
                            تم
                        </button>
                    </div>
                </div>
            </form>`
    }

    function showNote(note){
        modal.innerHTML = 
            `<h3 class="pb-2 mb-3 text-xl font-bold text-dark sm:text-2xl">
                الملاحظات
            </h3>
            <div>${note}</div>
            `
    }

    function addMonthBefore(){
        modal.innerHTML = 
        `<h3 class="pb-2 mb-3 text-xl font-bold text-dark sm:text-2xl">
            أضف شهر قبل الانتقال إلى السنة
        </h3>
    
        <input
            class="w-full max-w-xl px-4 py-2 border rounded-md focus:outline-none focus:ring" 
            type="text" 
            placeholder="اكتب العنوان هنا" 
            required=""
            x-ref="input"
        >
        
        <div class="flex flex-wrap justify-center mt-5 -mx-3">
            <div class="w-1/6 px-3">
                <button
                    @click="modalOpen = false"
                    class="block w-full p-3 text-base font-bold text-center text-white transition bg-red-600 border rounded-lg"
                >
                    إلغاء
                </button>
            </div>
            <div class="w-1/6 px-3">
                <button
                    class="block w-full p-3 text-base font-bold text-center transition border rounded-lg hover:bg-opacity-90"
                >
                    تم
                </button>
            </div>
        </div>`
    }
</script>


{% endblock %}